# Any tests that are network intensive are run on virtual devices because they do not run
# on the same congested network as physical devices. Running select tests on virtual devices
# ensures a more stable CI test execution and prevents test runs from exceeding the
# Firebase Test Lab physical device 30 minute time limit.
library-virtual-device-tests:
    timeout: 60m
    type: instrumentation
    app: library/ftl/dummy.apk
    test: library/build/outputs/apk/androidTest/debug/library-debug-androidTest.apk
    device:
        - {model: Nexus5, version: 19}
        - {model: Nexus5, version: 21}
        - {model: Nexus5, version: 22}
        - {model: Nexus5, version: 23}
        - {model: Nexus5X, version: 23}
        - {model: Nexus5X, version: 24}
        - {model: Nexus5X, version: 25}
        - {model: Pixel2, version: 26}
        - {model: Pixel2, version: 27}
        - {model: Pixel2, version: 28}
    test-targets:
        - class com.twilio.video.StatsTest
        - class com.twilio.video.StatsTopologyParameterizedTest
        - class com.twilio.video.CodecPreferencesTest
        - class com.twilio.video.MultiCodecParameterizedTest
        - class com.twilio.video.LocalParticipantTopologyTest
        - class com.twilio.video.DataTrackTopologyParameterizedTest
        - class com.twilio.video.RemoteAudioTrackTopologyParameterizedTest#shouldAllowEnablePlayback[P2P]
        - class com.twilio.video.RemoteAudioTrackTopologyParameterizedTest#shouldAllowEnablePlayback[GROUP]
        - class com.twilio.video.IceTopologyParameterizedTest

library-physical-device-tests:
    timeout: 30m
    type: instrumentation
    app: library/ftl/dummy.apk
    test: library/build/outputs/apk/androidTest/debug/library-debug-androidTest.apk
    device:
        - {model: m0, version: 18}
        - {model: g3, version: 19}
        - {model: flo, version: 21}
        - {model: A0001, version: 22}
        - {model: herolte, version: 23}
        - {model: herolte, version: 24}
        - {model: sailfish, version: 25}
        - {model: walleye, version: 26}
        - {model: walleye, version: 27}
        - {model: walleye, version: 28}
    environment-variables:
        notClass: com.twilio.video.LocalParticipantTopologyTest,com.twilio.video.DataTrackTopologyParameterizedTest,com.twilio.video.StatsTest,com.twilio.video.StatsTopologyParameterizedTest,com.twilio.video.CodecPreferencesTest,com.twilio.video.MultiCodecParameterizedTest,com.twilio.video.RemoteAudioTrackTopologyParameterizedTest#shouldAllowEnablePlayback[P2P],com.twilio.video.RemoteAudioTrackTopologyParameterizedTest#shouldAllowEnablePlayback[GROUP],com.twilio.video.IceTopologyParameterizedTest

library-camera-tests:
    timeout: 10m
    type: instrumentation
    app: library/ftl/dummy.apk
    test: library/build/outputs/apk/androidTest/debug/library-debug-androidTest.apk
    # The following devices have known issues executing camera tests. The bugs and tasks
    # are tracked in epic GSDK-1278.
    #
    # - j1acevelte
    # - flo
    # - D6503
    # - D6603
    # - victara
    # - SH-04H
    # - htc_m8
    # - hammerhead
    device:
        - {model: A0001, version: 22}
        - {model: athene, version: 23}
        - {model: athene_f, version: 23}
        - {model: hwALE-H, version: 21}
        - {model: g3, version: 19}
        - {model: hero2lte, version: 23}
        - {model: herolte, version: 23}
        - {model: herolte, version: 24}
        - {model: hlte, version: 19}
        - {model: j7xelte, version: 23}
        - {model: lt02wifi, version: 19}
        - {model: m0, version: 18}
        - {model: sailfish, version: 25}
        - {model: sailfish, version: 27}
        - {model: walleye, version: 26}
        - {model: walleye, version: 27}
        - {model: walleye, version: 28}
        - {model: shamu, version: 22}
        - {model: zeroflte, version: 23}
        - {model: shamu, version: 22}
    test-targets:
        - class com.twilio.video.Camera2CapturerIdParameterizedTest
        - class com.twilio.video.Camera2CapturerTest
        - class com.twilio.video.Camera2CapturerUsageTest
        - class com.twilio.video.CameraCapturerSourceParameterizedTest
        - class com.twilio.video.CameraCapturerTest
