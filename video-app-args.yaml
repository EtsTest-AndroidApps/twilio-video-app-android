# The tests that rely heavily on the Stats API require much more time to execute. These tests
# run in a separate test execution to ensure the entire test suite does not exceed the Firebase
# Test Lab 30 minute physical device time limit.

library-stats-instrumentation-tests:
    timeout: 30m
    type: instrumentation
    app: app/build/outputs/apk/internal/debug/app-internal-debug.apk
    test: library/build/outputs/apk/androidTest/debug/library-debug-androidTest.apk
    device:
        - {model: m0, version: 18}
        - {model: flo, version: 19}
        - {model: flo, version: 21}
        - {model: zeroflte, version: 22}
        - {model: herolte, version: 23}
        - {model: herolte, version: 24}
        - {model: sailfish, version: 25}
        - {model: sailfish, version: 26}
        - {model: sailfish, version: 27}
    test-targets:
        - class com.twilio.video.StatsTest
        - class com.twilio.video.StatsTopologyParameterizedTest
        - class com.twilio.video.CodecPreferencesTest
        - class com.twilio.video.MultiCodecParameterizedTest

library-no-stats-instrumentation-tests:
    timeout: 30m
    type: instrumentation
    app: app/build/outputs/apk/internal/debug/app-internal-debug.apk
    test: library/build/outputs/apk/androidTest/debug/library-debug-androidTest.apk
    device:
        - {model: m0, version: 18}
        - {model: flo, version: 19}
        - {model: flo, version: 21}
        - {model: zeroflte, version: 22}
        - {model: herolte, version: 23}
        - {model: herolte, version: 24}
        - {model: sailfish, version: 25}
        - {model: sailfish, version: 26}
        - {model: sailfish, version: 27}
    environment-variables:
        notClass: com.twilio.video.StatsTest,com.twilio.video.StatsTopologyParameterizedTest,com.twilio.video.CodecPreferencesTest,com.twilio.video.MultiCodecParameterizedTest

library-camera-tests:
    timeout: 10m
    type: instrumentation
    app: app/build/outputs/apk/internal/debug/app-internal-debug.apk
    test: library/build/outputs/apk/androidTest/debug/library-debug-androidTest.apk
    # The following devices have known issues executing camera tests. The bugs and tasks
    # are tracked in epic GSDK-1278.
    #
    # - j1acevelte
    # - flo
    # - D6503
    # - D6603
    # - victara
    # - SH-04H
    # - htc_m8
    # - hammerhead
    device:
        - {model: A0001, version: 22}
        - {model: athene, version: 23}
        - {model: athene_f, version: 23}
        - {model: hwALE-H, version: 21}
        - {model: g3, version: 19}
        - {model: hero2lte, version: 23}
        - {model: herolte, version: 23}
        - {model: herolte, version: 24}
        - {model: hlte, version: 19}
        - {model: j7xelte, version: 23}
        - {model: lt02wifi, version: 19}
        - {model: m0, version: 18}
        - {model: sailfish, version: 25}
        - {model: sailfish, version: 26}
        - {model: sailfish, version: 27}
        - {model: zeroflte, version: 22}
        - {model: zeroflte, version: 23}
        - {model: zerolte, version: 22}
    test-targets:
        - class com.twilio.video.Camera2CapturerIdParameterizedTest
        - class com.twilio.video.Camera2CapturerTest
        - class com.twilio.video.Camera2CapturerUsageTest
        - class com.twilio.video.CameraCapturerSourceParameterizedTest
        - class com.twilio.video.CameraCapturerTest
